<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <mate name="viewport" content="width=device-width" />
    <title>SCOUT.</title>
    <link href="style/homestyle.css" rel="stylesheet" />
    <link href="style/actionstyle.css" rel="stylesheet" />
    <script src="src/js/map.js"></script>
    <script src="build/clustering.js"></script>
    <script src="src/js/interact.js"></script>
    <script src="src/js/cluster.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@sgratzl/chartjs-chart-boxplot"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    <!--   Site-spesific Style   -->
    <style>
      header {
        display: flex;
        align-items: center;
        font-size: 30px;
        font-weight: 600;
        color: black;
        text-shadow: 1px 1px 20px rgba(255, 255, 255, 1);
        margin: 10px 20px;
      }

      textarea {
        width: 70%;
        height: 100%;
        min-width: 200px;
        min-height: 100px;
        text-align: left;
        font-size: larger;
        font-family: sans-serif;
        background-color: #d8d8d8;
        border-radius: 5px;
      }

      select {
        width: 150px;
        background-color: #969fe2;
        margin: 2px;
        padding: 10px 15px;
        border-radius: 5px;
        border-color: transparent;
      }

      .dropdown-container {
        display: none;
      }

      .visible {
        display: block;
      }

      #result {
        display: none;
      }

      #mapHTMLContainer {
        transform: scale(0.6);
        position: relative;
      }

      .distFunc {
        display: none;
        margin: auto;
      }
    </style>
  </head>
</html>

<body>
  <header>
    <h1>SCOUT.</h1>
  </header>

  <main style="text-align: center">
    <div class="box" id="prepare" style="z-index: 2">
      <div class="label">
        <p style="text-align: left">Upload your CSV file</p>
      </div>
      <!-- Input Area for data and function -->
      <textarea
        id="text_box"
        name="textinput"
        placeholder="Type here..."
        oninput="showDropdowns()"
      ></textarea>
      <!-- Formal and real button for add data -->
      <div>
        <button type="button" id="addDataButton">Add Data</button>
      </div>

      <input
        type="file"
        id="dataFile"
        name="dataFile"
        accept=".CSV"
        style="display: none"
      />

      <div class="box" id="box-for-check-list">
        <div id="checkFlagArea" style="display: none">
          <div class="label">
            <p style="text-align: left">Flag match</p>
          </div>
          <p id="flag_guide" style="text-align: left; margin: 10px"></p>
          <table id="checkTable" style="border-collapse: collapse">
            <thead>
              <tr>
                <th>Colum number</th>
                <th>Column title</th>
                <th>Daten flags</th>
              </tr>
            </thead>

            <tbody></tbody>
          </table>
        </div>
      </div>

      <div class="box" id="box-for-button-group">
        <div style="display: grid">
          <!-- Choose Function Button -->
          <div style="min-height: 80px">
            <div class="label">
              <p style="text-align: left">Choose clustering</p>
            </div>
            <select id="DataType" style="width: 200px; margin-top: 20px">
              <option
                value="noChoice"
                onclick="document.getElementById('distFunction').style.display='none'"
              >
                Choose your data type
              </option>
              <option
                value="Seq"
                onclick="document.getElementById('distFunction').style.display='none'"
              >
                DNA/RNA Sequence
              </option>
              <option
                value="ChemInfo"
                onclick="document.getElementById('distFunction').style.display='none'"
              >
                Molecule Information
              </option>
              <option
                value="Vector"
                onclick="document.getElementById('distFunction').style.display='none'"
              >
                Vector
              </option>
              <option
                value="Custom"
                onclick="document.getElementById('distFunction').style.display='inline'"
              >
                Custom
              </option>
              <!-- value="Vector" was former "Euclidean" -->
            </select>

            <select id="D_function" style="display: none">
              <option value="noChoice">Choose a Function</option>
            </select>

            <select id="Scaling_alg" name="SaclingAlgorithmus">
              <option value="noChoice">Add scaling algorithmus</option>
              <!-- the following values are supposed to uniqueley indentify their scaling algorithm -->
              <option value="1">SMACOF</option>
              <option value="2">SciKit-learn</option>
              <option value="3">Glimmer</option>
            </select>
          </div>
          <br />
          <textarea
            placeholder="Enter custom distance function"
            id="distFunction"
            class="distFunc"
          ></textarea>
          <div>
            <div class="label">
              <p style="text-align: left">Table Interpretation</p>
            </div>
            <!-- Flag check button -->
            <button
              id="colFlag_button"
              onclick="ColFlagCheck()"
              style="margin-top: 20px"
            >
              Flag Check
            </button>
            <!-- Delete All Button -->
            <button id="deleAllButton" onclick="deletedatenandfunc()">
              Delete All
            </button>
          </div>
          <div>
            <div class="label">
              <p style="text-align: left">Get your map now</p>
            </div>
          </div>
          <div>
            <!-- Run function Button -->
            <button
              id="runFuncButton"
              onclick="dealwithrun()"
              style="margin-top: 20px"
            >
              Run
            </button>

            <button id="myButton" onclick="showCSVDeviderPopUp()">
              Select CSV-Devider
            </button>
            <div id="CSVDeviderPopUp" style="display: none">
              <input
                type="text"
                id="myCSVDeviderInput"
                placeholder="default is commas"
              />
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Here for result, will only be showed after click -->
    <div id="result">
      <!-- Information Box -->
      <!-- <div id="InforArea" style="text-align: left; border: none; width: 30%">
        <table id="InforList" style="padding: 5px; border: 1px solid">
          <tr>
            <td>Cluster Information</td>
          </tr>
          <tr>
            <td>cluster 1</td>
          </tr>
          <tr>
            <td>cluster 2</td>
          </tr>
        </table>
      </div> -->
      <div
        id="clusterInfoBox"
        style="text-align: left; border: 1px solid; width: 30%"
      ></div>

      <!-- map Container with .js
            <div id="chartContainer" style="width: 50%; height: 100%;">
                <button type="button" style="float: right;">full screen</button>
            </div>
            -->

      <!-- Fullscreen complited -->
      <div
        id="mapContainer"
        style="border: none; width: auto; overflow: hidden"
      >
        <button
          id="switchbtn"
          ;
          type="button"
          ;
          value="preview"
          ;
          style="position: relative; float: left; margin-left: 5px; z-index: 5"
          ;
          onclick="MapViewSwitcher()"
        >
          Full Screen
        </button>
        <button
          id="BackButton2"
          style="position: relative; float: left; z-index: 5"
          onclick="window.location.reload();"
        >
          Restart
        </button>
        <div
          id="chartContainer"
          style="
            border: red;
            position: relative;
            z-index: 4;
            left: -260px;
            top: -120px;
            width: 1330px;
            transform: scale(0.6);
          "
        ></div>
      </div>
    </div>
  </main>

  <noscript>
    <div id="nojs">
      Error: JavaScript is not enabled in your browser. Please enable it for the
      best experience.
    </div>
  </noscript>

  <footer>
    <div style="text-align: right; margin-right: 30px">
      <!-- Back Button -->
      <img
        src="./style/folder/home-50.png"
        alt="home"
        onclick="window.open('home.html')"
      />
    </div>
  </footer>
</body>

<script>
  document
    .getElementById("addDataButton")
    .addEventListener("click", function () {
      document.getElementById("dataFile").click();
    });

  document.getElementById("dataFile").addEventListener("change", function () {
    readFileContents();
  });

  document.addEventListener("DOMContentLoaded", function () {
    var statusElement = document.getElementById("js-status");

    // Update the status element to indicate whether JavaScript is enabled
    if (statusElement) {
      statusElement.innerHTML = "JavaScript is enabled!";
      statusElement.style.color = "green";
    }
  });

  document.getElementById("DataType").addEventListener("change", function () {
    let distance_func_list = selectDataType();
    console.log(distance_func_list);
    clean_fun_slector();
    changedistancefunclist(distance_func_list);
  });
</script>
